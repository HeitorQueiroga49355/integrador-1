{% extends 'base/base.html' %}
{% load static %}

{% block content %}

  <main class="main_pesquisador_conteudo">

    {% block content_pesquisador %}
    <h3>Meus Projetos</h3>
    <section class="conteudo_tabela">
      <table class="table_meus_projetos">
        <thead>
          <tr>
            <th>Nome do Projeto</th>
            <th>Edital</th>
            <th>Data incial</th>
            <th>Data final</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
        {% for submission in submissions %}
          <tr class="titulo_projeto" onclick="window.location='{% url 'pesquisador-projetos-detalhes' submission.pk %}'" style="cursor: pointer;">
            <td>{{ submission.title }}</td>
            <td>{{ submission.proposal.title }}</td>
            <td>{{ submission.proposal.opening_date }}</td>
            <td>{{ submission.proposal.closing_date }}</td>
            <td>
              <div class="status status-{{ submission.display_status|slugify }}">
                {% if submission.display_status == "Aprovado" %}
                  <img src="{% static 'icons/aprovado.svg' %}" alt="Ícone de Aprovado">
                {% elif submission.display_status == "Reprovado" %}
                  <img src="{% static 'icons/reprovado.svg' %}" alt="Ícone de Reprovado">
                {% else %}
                  {# Status padrão: Em Avaliação #}
                  <img src="{% static 'icons/espera.svg' %}" alt="Ícone de Em Avaliação">
                {% endif %}
                <span>{{ submission.display_status }}</span>
              </div>
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="5" style="text-align: center;">Nenhum projeto encontrado.</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </section>
    {% endblock content_pesquisador %}
  </main>
{% endblock content %}